<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="css/navbar.css" rel="stylesheet">
    <link href="css/dashboard.css" rel="stylesheet">

    <!-- Settings CSS -->
    <link rel="stylesheet" href="./css/dark_mode.css">
</head>

<body onload="myFunction()">
    <div id="loader" style="display: none;" class="text-center">
        <svg viewBox="0 0 700 500" width="700" height="500">
            <defs>
                <g id="bicycle">
                    <svg viewBox="0 0 100 60" x="-75" y="-45" width="150" height="90">
                        <g fill="none" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="21" cy="39" r="19" />
                            <circle cx="21" cy="39" r="7" />

                            <circle cx="48" cy="39" r="6" />

                            <path d="M 40 39 h -19 l 15 -25 h 29 l 15 25 m -13.2 -22 l -14 15" />
                            <path d="M 44 32 l -12 -27 h -6 h 10 q 5 0 5 2" />
                            <path d="M 65 13 l -5 -12 h -2 h 15 a 6 6 0 0 1 0 12" />

                            <circle cx="79" cy="39" r="19" />
                            <circle cx="79" cy="39" r="7" />
                        </g>
                    </svg>
                </g>
                <clipPath id="clip--blue" clipUnits="userSpaceOnUse">
                    <rect transform="rotate(-45)" x="-75" width="300" y="-50" height="100" />
                </clipPath>
                <clipPath id="clip--red">
                    <rect transform="rotate(45)" x="-50" width="220" y="-362.5" height="140" />
                </clipPath>
                <clipPath id="clip--yellow">
                    <rect transform="rotate(-45)" x="217.5" width="217.5" y="167.5" height="100" />
                </clipPath>
            </defs>
            <g transform="translate(75 400)">
                <use href="#bicycle" stroke="#34a853" />
                <use clip-path="url(#clip--yellow)" href="#bicycle" stroke="#fabb05" />
                <use clip-path="url(#clip--red)" href="#bicycle" stroke="#ea4335" />
                <use clip-path="url(#clip--blue)" href="#bicycle" stroke="#4285f4" />

                <g transform="translate(37.5 22.5) rotate(-45)">
                    <rect fill="#4285f4" rx="10" width="262.5" height="50" />
                    <g transform="translate(262.5 0)">
                        <g transform="rotate(90)">
                            <rect fill="#ea4335" rx="10" width="262.5" height="50" />
                            <g transform="translate(212.5 50)">
                                <g transform="rotate(-90)">
                                    <rect fill="#fabb05" rx="10" width="212.5" height="50" />
                                    <g transform="translate(212.5 50)">
                                        <path fill="#34a853" stroke="#34a853" stroke-width="10" stroke-linejoin="round"
                                            stroke-linecap="round" d="M 0 0 v 50 l 80 -75 -80 -75 z" />
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </g>
        </svg>

        <h1 class="text-center">
            <span>L</span>
            <span>o</span>
            <span>a</span>
            <span>d</span>
            <span>i</span>
            <span>n</span>
            <span>g</span>
            <span>.</span>
            <span>.</span>
            <span>.</span>
        </h1>
    </div>


    <div id="main" style="display: none;" class="animate-bottom">
        <div id="dashboard-main">
            <div id="top-bar" class="sticky-top">
                <nav class="navbar navbar-expand-md navbar-light d-flex ps-4">
                    <div class="container-fluid">
                        <a class="navbar-brand fw-bold" href="dashboard.html"><img src="images/cyclink_logo.jpg"
                                style="width: 50px; height: 50px; border-radius: 50%; border: blueviolet solid 2px; margin-right: 10px;">&nbsp;Cyclink</a>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                            <ul class="navbar-nav">
                                <li class="nav-item my-auto">
                                    <a id="navbar_home" onmouseover="mouseover_style(this.id)"
                                        onmouseout="mouseout_style(this.id)" class="nav-link active my-auto mx-2"
                                        href="dashboard.html">Home</a>
                                </li>
                                <li class="nav-item my-auto mx-2">
                                    <a id="navbar_route" onmouseover="mouseover_style(this.id)"
                                        onmouseout="mouseout_style(this.id)" class="nav-link" href="map.html">Map</a>
                                </li>
                                <li class="nav-item my-auto mx-2">
                                    <a id="navbar_chat" onmouseover="mouseover_style(this.id)"
                                        onmouseout="mouseout_style(this.id)" class="nav-link" href="chat.html">Chat</a>
                                </li>
                                <li class="nav-item my-auto mx-2">
                                    <a id="navbar_request" onmouseover="mouseover_style(this.id)"
                                        onmouseout="mouseout_style(this.id)" class="nav-link position-relative"
                                        href="friend-requests.html">Friend Requests
                                        <span v-if="requests.length>0"
                                            class="position-absolute top-0 end-0 badge rounded-pill bg-danger">
                                            {{requests.length}}
                                            <span class="visually-hidden">unread messages</span>
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item my-auto mx-2">
                                    <a id="navbar_findfriends" onmouseover="mouseover_style(this.id)"
                                        onmouseout="mouseout_style(this.id)" class="nav-link"
                                        href="find-friends.html">Find Friends</a>
                                </li>
                                <li class="nav-item dropdown align-items my-auto mx-2">
                                    <a onmouseover="mouseover_style(this.id)" onmouseout="mouseout_style(this.id)"
                                        class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        <img id="nav-image" :src="photo" class="rounded-pill border bg-light"
                                            alt="profile" height="40"> {{name}}
                                    </a>
                                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                        <li><a class="dropdown-item" href="profile.html">My Profile</a></li>
                                        <li><a class="dropdown-item" href="settings.html">Settings</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item g_id_signout" @click="logout"
                                                style="cursor: pointer;">Logout</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>

            <div>
                <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                    <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                        <path
                            d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z" />
                    </symbol>
                </svg>

                <!-- logged in successfully alert -->
                <div id="loginAlert" style="display: block;">
                    <div class="alert alert-info d-flex align-items-center alert-dismissible fade show rounded-0"
                        role="alert" style="margin: 0;">
                        <svg class="bi flex-shrink-0 ms-4 me-2" width="20" height="20" role="img" aria-label="Info:">
                            <use xlink:href="#check-circle-fill" />
                        </svg>
                        <div>
                            Logged in successfully
                        </div>
                        <button type="button" class="btn-close me-4" data-bs-dismiss="alert"
                            aria-label="Close"></button>

                    </div>
                </div>

                <!-- Sliding Header -->
                <div class="safety_div">
                    <div class="topbar">
                        <p>Be Careful While Cycling! Be Careful While Cycling! Be Careful While Cycling! Be Careful
                            While Cycling! Be Careful While Cycling! Be Careful While Cycling! Be Careful While Cycling!
                            Be Careful While Cycling!</p>
                    </div>
                    <div class="topbar">
                        <p>Be Careful While Cycling! Be Careful While Cycling! Be Careful While Cycling! Be Careful
                            While Cycling! Be Careful While Cycling! Be Careful While Cycling! Be Careful While Cycling!
                            Be Careful While Cycling!</p>
                    </div>
                </div>


                <!-- Feed slideshow -->
                <div class="container-fluid pt-3 px-5 pb-5" style="background-color: rgb(241, 255, 241);">
                    <h1 class="display-5">Feed</h1>
                    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active" data-bs-interval="4000">
                                <div class="row align-items-center">
                                    <div class="col-sm-4 py-2">
                                        <img class="d-block img-fluid" :src="newsData[0].image" alt="First slide">
                                    </div>
                                    <div class="col-sm py-2">
                                        <h4 class="display-6">{{ newsData[0].title }}</h4>
                                        <p>{{ newsData[0].description }}</p>
                                        <p class="fst-italic">{{ newsData[0].author }}</p>
                                        <p class="fw-light" style="font-size: smaller;">{{ newsData[0].date }}</p>
                                        <a class="btn btn-primary news-btn" :href="newsData[0].link"
                                            target="_blank">Read More</a>
                                    </div>
                                </div>
                            </div>
                            <div class="carousel-item" data-bs-interval="4000" v-for="data of shuffleNews().slice(1)">
                                <div class="row align-items-center">
                                    <div class="col-sm-4 py-2">
                                        <img class="d-block img-fluid" :src="data.image" alt="First slide">
                                    </div>
                                    <div class="col-sm py-2">
                                        <h4 class="display-6">{{ data.title }}</h4>
                                        <p>{{ data.description }}</p>
                                        <p class="fst-italic">{{ data.author }}</p>
                                        <p class="fw-light" style="font-size: smaller;">{{ data.date }}</p>
                                        <a class="btn btn-primary news-btn" :href="data.link" target="_blank">Read
                                            More</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>

                <!-- links to map + weather api -->
                <div id="weather_div" class="container-fluid text-center py-4"
                    style="background-color: rgb(219, 216, 216);">
                    <h1 class="display-5 pt-4">{{ city }}'s Current Weather</h1>
                    <p class="fw-normal" style="font-size: medium;">{{ today_date }}</p>

                    <div class="row">
                        <div class="col my-auto text-end">
                            <h1 class="display-2 fw-bold">{{ temperature }}°C</h1>
                            <h4 class="fw-light text-capitalize">{{ weather_description }}</h4>
                            <p style="font-size: smaller;">Updated {{ time }}</p>
                        </div>
                        <div class="col text-start">
                            <img style="width: 200px;" :src="weather_icon">
                        </div>
                    </div>

                    <h5 class="d-flex justify-content-evenly pb-5">
                        <span class="text-primary">{{ humidity }}% Humidity</span>
                        <span class="text-warning">Feels like {{ feels_like }}°C</span>
                        <span class="text-info">Wind Speed {{ wind_speed }}m/s</span>
                    </h5>

                    <div class="row text-center mt-3 pb-4">
                        <h3 class="fw-light pb-4" style="text-decoration: underline; text-decoration-thickness: 1px;">
                            Weather Forecast at 8 AM</h3>
                        <div class="col" v-for="object of arrMidday">
                            <h4 class="fw-light text-capitalize">{{ convertDateTimeToDay(object.dt)[0] }}, {{
                                convertDateTimeToDay(object.dt)[1] }} {{ convertDateTimeToDay(object.dt)[2] }}</h4>
                            <h5>{{ object.main.temp.toFixed(0) }}°C</h5>
                            <img :src="'http://openweathermap.org/img/wn/' + object.weather[0].icon + '@2x.png'" />
                        </div>
                    </div>

                    <a class="btn btn-success mb-4 px-4" href="map.html">Start Planning Your Route >>></a>
                </div>

            </div>

            <div id="footer" class="text-center mt-3 pb-3 changedText">
                <p>Copyright ©️ Singapore Management University<br>All rights reserved.</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
    <!-- axios -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"
        integrity="sha512-u9akINsQsAkG9xjc1cnGF4zw5TFDwkxuc9vUp5dltDWYCSmyd0meygbvgXrlc/z7/o4a19Fb5V0OUE58J7dcyw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Google sign-in -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Dashboard JS -->
    <script src="js/dashboard.js"></script>

    <!-- Settings js -->
    <script src="js/dark_mode.js"></script>

    <script src="js/navbar.js"></script>
</body>

</html>